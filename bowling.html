<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>éŠ³é’ç§‘æŠ€ï½œä¿é½¡çƒè³½å‹™ç³»çµ± (å³æ™‚æ’åç‰ˆ)</title>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2400384553951061" crossorigin="anonymous"></script>

  <style>
    :root { 
      --eb-blue: #1a3a5f;    /* éŠ³é’æ·±è— */
      --eb-accent: #023e8a;  /* ä¿é½¡çƒæ·±è— */
      --eb-pink: #f72585;    /* äº®ç²‰ç´…é»ç¶´ */
      --eb-gold: #ff9f1c;    /* çµç®—é‡‘ */
      --bg: #f8fafc; 
      --card: #ffffff; 
    }
    
    * { box-sizing: border-box; }
    body { margin: 0; font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; background: var(--bg); color: #334155; padding-bottom: 50px; }
    
    /* å°èˆªæ¬„æ¨£å¼ - å°é½Šé«˜çˆ¾å¤« */
    .navbar { background: var(--eb-blue); color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .navbar .brand { font-weight: bold; letter-spacing: 1px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; }
    .navbar .brand span { font-size: 0.8rem; opacity: 0.8; font-weight: normal; }

    /* å…¨åŸŸå°èˆª */
    .global-nav { background: #333; padding: 12px 20px; text-align: left; width: 100%; box-sizing: border-box; }
    .global-nav a { color: #bbb; text-decoration: none; font-size: 0.9rem; margin-right: 15px; }
    .global-nav span { color: #fff; font-weight: bold; font-size: 0.9rem; border-bottom: 2px solid var(--eb-accent); padding-bottom: 3px; }

    .container { max-width: 1600px; margin: 20px auto; padding: 0 15px; }
    
    /* å¡ç‰‡é¢æ¿æ¨£å¼ - å°é½Šé«˜çˆ¾å¤« */
    .panel { background: var(--card); border-radius: 12px; padding: 25px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); margin-bottom: 25px; border-top: 4px solid var(--eb-accent); }
    
    h2 { font-size: 1.1rem; margin: 0 0 20px 0; color: var(--eb-blue); display: flex; align-items: center; gap: 8px; }
    h2::before { content: ""; display: inline-block; width: 4px; height: 18px; background: var(--eb-accent); border-radius: 2px; }
    
    /* è¨­å®šå€åŸŸä½ˆå±€ */
    .admin-info { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-bottom: 25px; background: #f1f5f9; padding: 20px; border-radius: 10px; }
    .admin-info div { display: flex; flex-direction: column; gap: 8px; }
    .admin-info label { font-size: 13px; font-weight: bold; color: var(--eb-blue); }
    .admin-info input, .admin-info select { padding: 12px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 14px; transition: all 0.3s; }
    .admin-info input:focus { border-color: var(--eb-blue); outline: none; box-shadow: 0 0 0 3px rgba(26, 58, 95, 0.1); }

    /* æŒ‰éˆ•æ¨£å¼ - å°é½Šé«˜çˆ¾å¤« */
    .btn-group { margin: 20px 0; display: flex; gap: 12px; justify-content: flex-end; flex-wrap: wrap; }
    .btn { border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; color: white; transition: all 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .btn:active { transform: translateY(2px); }
    .btn-calc { background: var(--eb-blue); }
    .btn-draw { background: var(--eb-pink); }
    .btn-clear { background: #94a3b8; }

    /* å³æ™‚æ’åèˆ‡çµç®—å€ */
    .live-rank { background: #fff5f5; border: 1px solid #ffc9c9; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
    .rank-item { display: inline-block; background: #fff; padding: 6px 15px; border-radius: 20px; margin: 5px; border: 1px solid #ffc9c9; font-size: 13px; font-weight: bold; }

    .draw-section { background: #fff9db; padding: 20px; border-radius: 10px; margin-bottom: 25px; border: 2px dashed #fab005; }
    .draw-controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; align-items: end; }

    /* è¡¨æ ¼æ¨£å¼ - å°é½Šé«˜çˆ¾å¤« */
    .table-section { background: var(--card); border-radius: 12px; padding: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; min-width: 1100px; }
    th { background: #f8fafc; color: var(--eb-blue); padding: 12px 5px; font-size: 13px; border: 1px solid #e2e8f0; }
    td { border: 1px solid #e2e8f0; text-align: center; height: 45px; }
    input.score-input { width: 100%; height: 100%; border: none; background: transparent; text-align: center; font-size: 18px; font-weight: bold; outline: none; }
    input.score-input:focus { background: #fef9c3; }
    .total-cell { font-weight: bold; background: #fef2f2; color: #ef4444; }

    /* çµæœæ’åç®± */
    .rank-box { padding: 20px; border-radius: 10px; margin-bottom: 20px; border-top: 4px solid var(--eb-blue); }
    .rank-A { background: #fff5f5; border-color: #ffc9c9; }
    .rank-B { background: #f0f7ff; border-color: #a5d8ff; }
    .rank-title { font-weight: bold; font-size: 1.1rem; color: var(--eb-blue); margin-bottom: 15px; display: block; }

    footer { text-align: center; padding: 40px; color: #94a3b8; font-size: 0.9rem; }
  </style>
</head>
<body>

<nav class="global-nav">
    <a href="./index.html">ğŸ  é¦–é </a>
    <a href="./golf_calc.html">â›³ é«˜çˆ¾å¤«ä¸»é </a>
    <span style="border-bottom-color: var(--eb-pink);">ğŸ³ ä¿é½¡çƒ (ç›®å‰ä½ç½®)</span>
</nav>

<nav class="navbar">
  <div class="brand">EDGEBLUE SYSTEMS <span>éŠ³é’ç§‘æŠ€æ•´åˆ</span></div>
  <div style="font-size: 0.9rem; font-weight: bold;">ğŸ³ ä¿é½¡çƒè³½å‹™ç³»çµ± v4.2</div>
</nav>

<div class="container">
  <div class="panel">
    <h2>1. è³½äº‹åŸºæœ¬è¨­å®š</h2>
    <div class="admin-info">
      <div><label>æ¯”è³½å±€æ•¸ (G)</label><input type="number" id="gameCount" value="5" onchange="initSystem()"></div>
      <div><label>åƒè³½äººæ•¸</label><input type="number" id="playerCount" value="15" onchange="initSystem()"></div>
      <div><label>éŒ„å–åé¡</label><input type="number" id="prizeCount" value="5" onchange="saveAll()"></div>
      <div><label>å¥³ç”ŸåŠ åˆ†</label><input type="number" id="bonusLady" value="40" onchange="saveAll()"></div>
      <div><label>é•·é’åŠ åˆ†</label><input type="number" id="bonusElder" value="20" onchange="saveAll()"></div>
    </div>
    <div class="btn-group">
      <button class="btn btn-calc" onclick="initSystem()">ğŸ”„ åˆ·æ–°æˆç¸¾è¡¨</button>
      <button class="btn btn-clear" onclick="clearData()">âš ï¸ æ¸…ç©ºè³‡æ–™</button>
    </div>
  </div>

  <div class="table-section" id="scorePanel" style="display:none; margin-bottom: 25px;">
    <h2>2. æˆç¸¾è¼¸å…¥èˆ‡çµ±è¨ˆ</h2>
    <table>
      <thead id="tableHead"></thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <div class="panel" id="resultPanel" style="display:none;">
    <h2>3. è³½å‹™çµç®—ä¸­å¿ƒ</h2>
    
    <div class="live-rank">
      <span style="font-weight: bold; color: #d90429; display: block; margin-bottom: 10px;">ğŸ† å³æ™‚é ˜å…ˆé è¦½ (ä¾›æŠ½ç±¤åƒè€ƒ)</span>
      <div id="liveRankContent">è¼¸å…¥åˆ†æ•¸å¾Œé¡¯ç¤ºæ’å...</div>
    </div>

    <div class="draw-section">
      <div class="draw-controls">
        <div><label>ä¹™çµ„æ¡è¨ˆé …æ¬¡ (1,3,5)</label><input type="text" id="manualRanks" value="1,3,5"></div>
        <div><label>ä¹™çµ„ä¿‚æ•¸</label><input type="number" id="manualRatio" step="0.01" value="0.86"></div>
        <div><label>ä¸™çµ„ä¿‚æ•¸</label><input type="number" id="ratioC" step="0.01" value="0.95"></div>
        <button class="btn btn-draw" onclick="manualSettle()">ğŸ† åŸ·è¡Œå…¨å ´çµç®—</button>
      </div>
      <div id="drawInfo" style="margin-top:15px; font-weight: bold; color: #856404;"></div>
    </div>

    <div id="rankDisplay"></div>
  </div>

  <div class="panel" style="background: #fdfdfd; border-top-color: #2980b9;">
    <h3 style="color: var(--eb-blue); font-size: 1.1rem; margin-top: 0;">ğŸ³ EdgeBlue ä¿é½¡çƒè³½å‹™ç®¡ç†å„ªå‹¢</h3>
    <p style="font-size: 0.9rem; color: #64748b; line-height: 1.8;">
      æœ¬å·¥å…·å°ˆç‚ºä¿é½¡çƒè¯è³½ã€å…¬å¸å¤§å‹ç›ƒè³½é‡èº«æ‰“é€ ã€‚æˆ‘å€‘è·³éå‚³çµ±ç¹ç‘£çš„å–®æ ¼è¨ˆåˆ†é‚è¼¯ï¼Œç›´æ¥ä¸²æ¥çƒé¤¨è‡ªå‹•è¨ˆåˆ†ç³»çµ±çš„ç¸½åˆ†ï¼Œå°‡æ ¸å¿ƒåƒ¹å€¼å°ˆæ³¨æ–¼ï¼š
    </p>
    <ul style="font-size: 0.9rem; color: #64748b; line-height: 2;">
      <li><strong>è¡Œæ”¿æ•ˆç‡ï¼š</strong> è³½å‹™äººå“¡åƒ…éœ€éŒ„å…¥æ¯å±€ç¸½åˆ†ï¼Œç³»çµ±è‡ªå‹•å®Œæˆå¤šå±€ç´¯è¨ˆï¼Œå¤§å¹…é™ä½äººå·¥è¨ˆç®—å‡ºéŒ¯ç‡ã€‚</li>
      <li><strong>å…¬å¹³æ¬Šé‡ï¼š</strong> å…§å»ºæ€§åˆ¥èˆ‡é•·é’åŠ åˆ†æ©Ÿåˆ¶ï¼Œä¸¦æ”¯æ´è¤‡é›œçš„ã€Œä¹™çµ„/ä¸™çµ„ã€å‹•æ…‹é–€æª»çµç®—ã€‚</li>
      <li><strong>å³æ™‚æ’åï¼š</strong> æ”¯æ´æ¯”è³½é€²è¡Œä¸­åŒæ­¥æ›´æ–°æ’åï¼Œæ–¹ä¾¿ä¸»è¾¦æ–¹å®‰æ’è³½å¾ŒæŠ½ç±¤æˆ–çé …é ’ç™¼ã€‚</li>
    </ul>
  </div>
</div>

<footer>
  Â© 2026 éŠ³é’ç§‘æŠ€æ•´åˆæœ‰é™å…¬å¸ EdgeBlue Systems Integration Co., Ltd.<br>
  å°ˆæ¥­è»Ÿé«”é–‹ç™¼èˆ‡è³‡è¨ŠæŠ€è¡“æœå‹™ | <a href="./privacy.html" style="color: #94a3b8; text-decoration: none;">éš±ç§æ¬Šæ”¿ç­–</a>
</footer>

<script>
// --- ä¿ç•™æ‚¨åŸæœ¬å¼·å¤§çš„ä¿é½¡çƒé‚è¼¯ ---
let players = [];
window.onload = function() { loadSavedData(); };

function initSystem() {
  const gCount = parseInt(document.getElementById('gameCount').value);
  const pCount = parseInt(document.getElementById('playerCount').value);
  const newPlayers = [];
  for(let i=0; i<pCount; i++) {
    newPlayers.push(players[i] || { id: i+1, name: `çƒå“¡${i+1}`, tag: "ä¸€èˆ¬", bonus: 0, scores: Array(gCount).fill(0
